<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoCAD Basic Quiz - GitHub Ready</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&display=swap');
        body { font-family: 'Sarabun', sans-serif; overflow-x: hidden; }
        .hidden { display: none; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body class="bg-slate-900 text-white min-h-screen flex items-center justify-center p-4">

    <!-- Start Page (Cover) -->
    <div id="start-page" class="max-w-md w-full bg-slate-800 p-8 rounded-2xl shadow-2xl border border-slate-700 fade-in">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-blue-400 mb-2">AutoCAD Basic Quiz</h1>
            <p class="text-slate-400 font-light">‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô AutoCAD ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</p>
        </div>
        <div class="space-y-4">
            <div>
                <label class="block text-sm mb-1 text-slate-300">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                <input type="text" id="student-name" class="w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none text-white" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
            </div>
            <div>
                <label class="block text-sm mb-1 text-slate-300">‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</label>
                <input type="text" id="student-id" class="w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none text-white" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏´‡∏±‡∏™‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß">
            </div>
            <button id="btn-start" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-lg transition-all transform active:scale-95 mt-4">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏ö‡∏ó‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
        </div>
        <div class="mt-6 text-[10px] text-slate-500 text-center leading-relaxed">
            * ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏∏‡∏à‡∏£‡∏¥‡∏ï
        </div>
    </div>

    <!-- Quiz Page -->
    <div id="quiz-page" class="max-w-2xl w-full bg-slate-800 p-6 md:p-10 rounded-2xl shadow-2xl border border-slate-700 hidden fade-in">
        <div class="flex justify-between items-center mb-6 border-b border-slate-700 pb-4">
            <div class="text-lg">
                <span class="text-blue-400 font-bold">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà:</span>
                <span id="current-question-num" class="text-xl">1</span><span class="text-slate-500"> / 5</span>
            </div>
            <div id="timer" class="text-orange-400 font-mono text-2xl font-bold">00:00</div>
        </div>
        
        <div id="question-container" class="mb-8">
            <h2 id="question-text" class="text-xl md:text-2xl font-semibold mb-8 leading-snug">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°...</h2>
            <div id="options-container" class="grid grid-cols-1 gap-3">
                <!-- Options injected by JS -->
            </div>
        </div>
        
        <button id="btn-next" class="w-full bg-slate-600 text-slate-400 font-bold py-4 rounded-xl cursor-not-allowed transition-all" disabled>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
    </div>

    <!-- Result Page -->
    <div id="result-page" class="max-w-md w-full bg-slate-800 p-8 rounded-2xl shadow-2xl border border-slate-700 hidden fade-in text-center">
        <div class="mb-6">
            <div class="inline-flex items-center justify-center w-20 h-20 bg-green-500/20 text-green-500 rounded-full mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
            </div>
            <h2 class="text-3xl font-bold text-white">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß!</h2>
        </div>

        <div class="bg-slate-900/50 border border-slate-700 rounded-2xl p-6 mb-6 text-left space-y-3">
            <div class="flex justify-between items-center">
                <span class="text-slate-400">‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤:</span>
                <span id="res-name" class="font-semibold text-blue-400"></span>
            </div>
            <div class="flex justify-between items-center border-t border-slate-800 pt-2">
                <span class="text-slate-400">‡∏£‡∏´‡∏±‡∏™:</span>
                <span id="res-id" class="font-semibold text-blue-400"></span>
            </div>
            <div class="flex justify-between items-center border-t border-slate-800 pt-2 text-lg">
                <span class="text-slate-400">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô:</span>
                <span class="text-2xl font-bold text-green-400"><span id="res-score"></span> / 5</span>
            </div>
            <div class="flex justify-between items-center border-t border-slate-800 pt-2">
                <span class="text-slate-400">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ:</span>
                <span id="res-time" class="font-mono font-bold text-orange-400"></span>
            </div>
            <div id="cheat-info" class="text-xs text-red-400 text-center pt-2 hidden">
                ‚ö†Ô∏è ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ó‡∏∏‡∏à‡∏£‡∏¥‡∏ï <span id="res-cheat"></span> ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
            </div>
        </div>

        <button onclick="downloadResult()" class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 rounded-lg mb-3 shadow-lg shadow-green-900/20">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏ö‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (CSV)</button>
        <button onclick="location.reload()" class="w-full text-slate-400 hover:text-white text-sm transition">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
    </div>

    <!-- Anticheat Modal -->
    <div id="cheat-modal" class="fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-red-600 p-8 rounded-2xl text-center max-w-sm border-2 border-red-400 shadow-2xl">
            <div class="text-5xl mb-4">üö´</div>
            <h3 class="text-2xl font-bold mb-2">‡∏´‡πâ‡∏≤‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏™‡∏≠‡∏ö!</h3>
            <p class="text-red-100 mb-6 font-light">‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏™‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏≠‡∏∑‡πà‡∏ô ‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡πà‡∏á‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå</p>
            <button onclick="closeCheatModal()" class="bg-white text-red-600 px-8 py-3 rounded-xl font-bold shadow-lg">‡∏â‡∏±‡∏ô‡∏à‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏≥‡∏ï‡πà‡∏≠</button>
        </div>
    </div>

    <script>
        const masterQuestions = [
            { q: "‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏î‡πÉ‡∏ô AutoCAD ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á?", options: ["CIRCLE", "RECTANGLE", "LINE", "ARC"], correct: 2 },
            { q: "‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á AutoCAD ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?", options: [".jpg", ".dwg", ".exe", ".pdf"], correct: 1 },
            { q: "‡∏Å‡∏≤‡∏£ Push ‡∏á‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô GitHub ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏î?", options: ["‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏¥‡πâ‡∏á", "‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå", "‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°", "‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏î‡∏ß‡∏á‡∏Å‡∏•‡∏°"], correct: 1 },
            { q: "‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÅ‡∏ö‡∏ö AutoCAD ‡πÉ‡∏ô GitHub ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏î?", options: ["COMMIT", "DELETE", "FORMAT", "ERASE"], correct: 0 },
            { q: "‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á 'TRIM' ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£?", options: ["‡∏¢‡∏∑‡∏î‡πÄ‡∏™‡πâ‡∏ô", "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ß‡∏á‡∏Å‡∏•‡∏°", "‡∏ï‡∏±‡∏î‡πÄ‡∏™‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô", "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡πÄ‡∏™‡πâ‡∏ô"], correct: 2 }
        ];

        let selectedQuestions = [];
        let currentIdx = 0;
        let score = 0;
        let startTime, timerInterval;
        let cheatCount = 0;
        let selectedOption = null;

        // UI Helpers
        const hide = el => el.classList.add('hidden');
        const show = el => el.classList.remove('hidden');

        document.getElementById('btn-start').onclick = () => {
            const name = document.getElementById('student-name').value.trim();
            const sid = document.getElementById('student-id').value.trim();
            if (!name || !sid) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô");

            selectedQuestions = [...masterQuestions].sort(() => Math.random() - 0.5);
            hide(document.getElementById('start-page'));
            show(document.getElementById('quiz-page'));
            
            startTime = new Date();
            startTimer();
            displayQuestion();

            // Anti-cheat setup
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    cheatCount++;
                    show(document.getElementById('cheat-modal'));
                }
            });
        };

        function startTimer() {
            timerInterval = setInterval(() => {
                const diff = new Date(new Date() - startTime);
                const m = String(diff.getUTCMinutes()).padStart(2, '0');
                const s = String(diff.getUTCSeconds()).padStart(2, '0');
                document.getElementById('timer').innerText = `${m}:${s}`;
            }, 1000);
        }

        function displayQuestion() {
            const data = selectedQuestions[currentIdx];
            const btnNext = document.getElementById('btn-next');
            
            document.getElementById('current-question-num').innerText = currentIdx + 1;
            document.getElementById('question-text').innerText = data.q;
            
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            selectedOption = null;
            
            btnNext.disabled = true;
            btnNext.className = "w-full bg-slate-700 text-slate-500 font-bold py-4 rounded-xl cursor-not-allowed";
            btnNext.innerText = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö";

            // Randomize options for this user
            const options = data.options.map((text, i) => ({ text, i }));
            options.sort(() => Math.random() - 0.5);

            options.forEach(opt => {
                const b = document.createElement('button');
                b.className = "w-full text-left p-5 bg-slate-700/50 hover:bg-slate-700 border border-slate-600 rounded-xl transition-all outline-none focus:border-blue-500 active:scale-[0.98]";
                b.innerText = opt.text;
                b.onclick = () => {
                    Array.from(container.children).forEach(c => c.classList.remove('ring-2', 'ring-blue-500', 'bg-blue-900/20', 'border-blue-500'));
                    b.classList.add('ring-2', 'ring-blue-500', 'bg-blue-900/20', 'border-blue-500');
                    selectedOption = opt.i;
                    btnNext.disabled = false;
                    btnNext.className = "w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-900/20 transition-all transform active:scale-95";
                    btnNext.innerText = currentIdx === 4 ? "‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö" : "‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ";
                };
                container.appendChild(b);
            });
        }

        document.getElementById('btn-next').onclick = () => {
            if (selectedOption === selectedQuestions[currentIdx].correct) score++;
            
            if (currentIdx < 4) {
                currentIdx++;
                displayQuestion();
            } else {
                finish();
            }
        };

        function finish() {
            clearInterval(timerInterval);
            hide(document.getElementById('quiz-page'));
            show(document.getElementById('result-page'));

            document.getElementById('res-name').innerText = document.getElementById('student-name').value;
            document.getElementById('res-id').innerText = document.getElementById('student-id').value;
            document.getElementById('res-score').innerText = score;
            document.getElementById('res-time').innerText = document.getElementById('timer').innerText;
            
            if (cheatCount > 0) {
                show(document.getElementById('cheat-info'));
                document.getElementById('res-cheat').innerText = cheatCount;
            }
        }

        function closeCheatModal() {
            hide(document.getElementById('cheat-modal'));
        }

        function downloadResult() {
            const name = document.getElementById('res-name').innerText;
            const id = document.getElementById('res-id').innerText;
            const scoreVal = score;
            const time = document.getElementById('res-time').innerText;
            const cheats = cheatCount;
            const date = new Date().toLocaleString('th-TH');

            const csvContent = "data:text/csv;charset=utf-8," 
                + "Student Name,ID,Score,Time Taken,Cheat Flags,Date\n"
                + `"${name}","${id}",${scoreVal}/5,"${time}",${cheats},"${date}"`;

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `Result_${id}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
</body>
</html>